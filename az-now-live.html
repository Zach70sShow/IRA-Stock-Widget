<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>AZ NOW ‚Äî API Sanity Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    html, body {
      margin: 0;
      width: 100%;
      height: 100%;
      background: #050814;
      color: #eaeaff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      overflow: hidden;
    }

    body {
      display: grid;
      place-items: center;
    }

    .panel {
      background: #0c1133;
      border: 1px solid #ffffff22;
      border-radius: 16px;
      padding: 24px 28px;
      width: min(900px, 92vw);
      box-shadow: 0 20px 40px #00000088;
    }

    h1 {
      margin: 0 0 12px;
      font-size: 28px;
      letter-spacing: 0.5px;
    }

    .status {
      font-size: 22px;
      margin-bottom: 16px;
    }

    .ok { color: #60ffb0; }
    .bad { color: #ff5b6e; }

    pre {
      background: #00000055;
      border: 1px solid #ffffff22;
      border-radius: 12px;
      padding: 14px;
      max-height: 300px;
      overflow: auto;
      font-size: 14px;
    }
  </style>
</head>

<body>

<div class="panel">
  <h1>AZ NOW ‚Äî API Sanity Check</h1>

  <div id="keyStatus" class="status bad">
    ‚ùå API KEY NOT DETECTED
  </div>

  <div id="fetchStatus" class="status">
    Waiting to fetch cameras‚Ä¶
  </div>

  <pre id="output">(no data yet)</pre>
</div>

<script>
/* =====================================================
   STEP 1 ‚Äî PUT YOUR API KEY HERE (ONLY HERE)
   ===================================================== */

const AZ511_API_KEY = "03228dfc7c4d4980a28a69c30fb9b8bf";

/* =====================================================
   DO NOT EDIT BELOW THIS LINE (for now)
   ===================================================== */

const keyStatusEl = document.getElementById("keyStatus");
const fetchStatusEl = document.getElementById("fetchStatus");
const outputEl = document.getElementById("output");

// --- Check if key exists ---
if (
  !AZ511_API_KEY ||
  AZ511_API_KEY.includes("PASTE_YOUR")
) {
  keyStatusEl.textContent = "‚ùå API KEY MISSING OR PLACEHOLDER";
  keyStatusEl.className = "status bad";
} else {
  keyStatusEl.textContent = `‚úÖ API KEY LOADED (‚Ä¶${AZ511_API_KEY.slice(-4)})`;
  keyStatusEl.className = "status ok";
}

// --- Fetch cameras ---
async function fetchCameras() {
  fetchStatusEl.textContent = "üì° Fetching camera data‚Ä¶";

  try {
    const res = await fetch(
      `https://az511.com/api/v2/get/cameras?key=${AZ511_API_KEY}&format=json`
    );

    if (!res.ok) {
      throw new Error(`HTTP ${res.status}`);
    }

    const data = await res.json();

    fetchStatusEl.textContent = "‚úÖ Camera fetch successful";
    fetchStatusEl.className = "status ok";

    // Show first few cameras so we KNOW it works
    outputEl.textContent = JSON.stringify(
      data.slice(0, 3),
      null,
      2
    );

  } catch (err) {
    fetchStatusEl.textContent = "‚ùå Fetch failed ‚Äî check console";
    fetchStatusEl.className = "status bad";
    outputEl.textContent = String(err);
    console.error(err);
  }
}

fetchCameras();
</script>

</body>
</html>
